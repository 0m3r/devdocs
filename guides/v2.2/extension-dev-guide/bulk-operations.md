---
layout: default
group: extension-dev-guide
subgroup: 99_Module Development
title: Bulk Operations
menu_title: Bulk Operations (Enterprise Edition Only)
menu_order: 20
version: 2.2
github_link: extension-dev-guide/bulk-operations.md

---

## {{page.title}}
<img src="{{ site.baseurl }}common/images/ee-only_large.png" alt="This topic applies to Enterprise Edition only">

A bulk operation The BulkOperations module sends

We have three possible clients for Bulk API:
Business logic which publish Bulk operation
Handler/Consumer which handles each specific operation
Client which get status of the Bulk operation and show the list of failed operations

### Publish bulk operations

<table>
<tr><th>Parameter</th><th>Type</th><th>Description</th></tr>
<tr><td>$bulkUuid</td>
<td>string</td>
<td>Bulk identifier generated by
<code>Magento\Framework\DataObject\IdentityGeneratorInterface::generateId</code></td></tr>
<tr><td>$operations</td>
<td>array</td>
<td>
<ul><li><p>topic_name - Must be defined in the <code>queue.xml</code> and <code>communication.xml</code> files.</p></li>
<li><p>bulk_uuid -  A bulk identifier </p></li>
<li><p>status -  The default operation status <code>OperationInterface::STATUS_TYPE_OPEN</code></p></li>
<li><p>serialized_data - An array of serialized data with the following required keys:</p></li>
  <ul><li><p>entity_id - Your entity ID</p></li>
  <li><p>entity_link - Link to your entity</p></li>
  <li><p>meta_info - String that describes your entity. For example, "SKU: Simple_Product"</p></li></ul>
<p>This data is required to display the results of operations couldn't be executed for any non-recoverable reason. These results are displayed in the failed operations grid.</p>
<p>You also can add any data needed to execute operations. For example, if you are conducting a mass price update, you can add price data.</p>
</ul>
</td></tr>
<tr><td>$bulkDescription</td>
<td>string</td>
<td>A description of the bulk operation. This value is displayed in the <b>Your Bulk Operations</b> grid.</td></tr>
<tr><td>$userId</td>
<td>int</td>
<td>The Admin user ID that executes this bulk operation.</td></tr>
</table>


### Define a consumer class


#### Handling Recoverable Exceptions

Magento provides new database exception classes to simplify the process of identifying recoverable database errors in client code. In most cases, such errors happen due to some environment issues and can be fixed. The full path to these classes is `Magneto\Framework\DB\Adapter\<class_name>`. These exceptions extend generic `\Zend_Db_Adapter_Exception`.

Exception class | Description of database error(s)
--- | ---
ConnectionException	| SQLSTATE[HY000]: General error: 2006 MySQL server has gone away SQLSTATE[HY000]: General error: 2013 Lost connection to MySQL server during query
LockWaitException | SQLSTATE[HY000]: General error: 1205 Lock wait timeout exceeded
DeadlockException	| SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock

The following pseudocode illustrates how

{% highlight php startinline=true %}
<?php
namespace example;
use Magento\Framework\DB\Adapter\LockWaitException;

// ...
try {
    // do something
} catch (LockWaitException $exception) {
    // try to recover from exception
}
{% endhighlight %}


### Get the status of operations
.

#### Related Topics

* [RabbitMQ Overview]( {{page.baseurl}}config-guide/mq/rabbitmq-overview.html)
