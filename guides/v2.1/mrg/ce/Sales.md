---
layout: default
group: mrg
subgroup: Community Edition
title: Magento_Sales module
menu_title: Sales
menu_order: 2
level3_menu_node: level3child
level3_subgroup: ce_modules
version: 2.1
github_link: mrg/ce/sales.md
---

<h3>Contents</h3>

* TOC
{:toc}

## Description

<span style="color: blue">Autogenerated from `README.md`.</span>

{% collapsible Click to show/hide included content %}

{% remote_markdown https://raw.githubusercontent.com/magento/magento2/2.1/app/code/Magento/Sales/README.md#overview %}

{% endcollapsible %}

## Dependencies

<span style="color: blue">Autogenerated from `composer.json`</span>

{% collapsible Click to show/hide included code %}

{% highlight json%}
{% remote_markdown https://raw.githubusercontent.com/magento/magento2/2.1/app/code/Magento/Sales/composer.json %}
{% endhighlight %}

{% endcollapsible %}

## Services / APIs

### InvoiceOrder

#### Description

The service introduces a capability to execute Magento native business flow of the Sales module using API.

With this service extension developer can:

- create an invoice document (full or partial);
- capture money that were placed with order payment;
-  notify customer about document creation;
-  change order status and state corresponding to performed actions.

#### webapi.xml declaration

{% highlight xml %}
<route url="/V1/order/:orderId/invoice" method="POST">
    <service class="Magento\Sales\Api\InvoiceOrderInterface" method="execute"/>
    <resources>
        <resource ref="Magento_Sales::sales" />
    </resources>
</route>
{% endhighlight %}

#### PHP declaration

{% highlight php %}

<?php

/**
 * @param int $orderId
 * @param bool|false $capture
 * @param \Magento\Sales\Api\Data\InvoiceItemCreationInterface[] $items
 * @param bool|false $notify
 * @param bool|false $appendComment
 * @param Data\InvoiceCommentCreationInterface|null $comment
 * @param Data\InvoiceCreationArgumentsInterface|null $arguments
 * @return int
 */
public function execute(
    $orderId,
    $capture = false,
    array $items = [],
    $notify = false,
    $appendComment = false,
    \Magento\Sales\Api\Data\InvoiceCommentCreationInterface $comment = null,
    \Magento\Sales\Api\Data\InvoiceCreationArgumentsInterface $arguments = null
);

?>

{% endhighlight %}

#### Service arguments

|`orderId`|	An identifier of a target order for operation|	Integer |	Required
|`capture`| Type of money capture | Boolean |	If TRUE, service performs capture online, If FALSE, offline capture will be triggered. (DEFAULT)|	Optional
|`items`|	array of items that will be included to invoice, this argument is required only for partial invoice creation. by default invoice will be created for all order items.| array with an item format `target order_item_id => quantity`|	Optional
|`notify`| if true customer will be notified with email. email includes invoice information| Boolean|	Optional
|`appendComment`|	if true and comment was specified, comment will be included into email with invoice|	Boolean|	Optional
|`comment`|	comment, that will be added to invoice|	Format|	Optional
|`arguments`|	operation arguments, this parameter reserved for extension modules.|	Format|	Optional

#### Service implementation

<span style="color: blue">Autoimported from GitHub.</span>

{% collapsible Click to show/hide included code %}

{% highlight php %}
{% remote_markdown https://raw.githubusercontent.com/magento/magento2/develop/app/code/Magento/Sales/Model/InvoiceOrder.php %}
{% endhighlight %}

{% endcollapsible %}

#### Extension points

The service contains extension points marked with `@api` annotation. These APIs can be used by extension developers to extend service logic.

|`\Magento\Sales\Api\OrderRepositoryInterface`| Order repository is responsible for Order entity persistence.|
|`\Magento\Sales\Model\Order\InvoiceRepository`| Invoice repository is responsible for Invocie creation.|
|`\Magento\Sales\Model\Order\InvoiceDocumentFactory`|	Responsible for new invoice object creation, this factory uses arguments parameter to process extension attributes of new invoice document.|
|`\Magento\Sales\Model\Order\OrderValidatorInterface`| Performs order document validation with selected rules.|
|`\Magento\Sales\Model\Order\PaymentAdapterInterface`| Perform pay operation according to selected option online/offline, returns order with modified state (with payment specific information).|
|`\Magento\Sales\Model\Order\OrderStateResolverInterface`| Provides correct order state, according with performed operation.|
