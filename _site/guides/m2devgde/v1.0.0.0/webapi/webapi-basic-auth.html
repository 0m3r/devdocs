<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Authorizing Web API Requests</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Magento 2 Developer's Guide">
   <link href="/common/css/bootstrap.min.css" rel="stylesheet">
  <link href="/common/css/hc.css" rel="stylesheet">
  <link href="/common/css/main.css" rel="stylesheet">
  <link href="/common/css/jquery.toc.css" rel="stylesheet">
  <script src="/common/js/jquery-1.11.0.min.js"></script>
  <script src="/common/js/jquery.toc.js"></script>


<!--   <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
 -->  <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
  <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/r29/html5.min.js"></script>
  <![endif]-->
    </head>
    <body>
<!-- <div class="nav-toggle"><i class="fa fa-bars fa-2x"></i> Herring Cove </div>
 -->      <div id = "wrapper">


<div class="navbar navbar-default" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <p class="navbar-brand">Magento 2 Developer's Guide</p>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
          <!-- <li><a href="/guides/m2devgde/svc-how-to-use.html">How a Client Uses a Service</a></li>
          <li><a href="/guides/m2devgde/what-is-svc.html">What is the Magento 2 Service Framework?</a></li> -->
         <!--  <li><a href="/links.html">Links</a></li>
          <li><a href="/projects.html">Projects</a></li>
          <li><a href="/about.html">About</a></li> -->
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>



       <!-- Sidebar -->
	   
	   
       <div id="sidebar-wrapper">
	   <div class="logo">
	   <a href="/"><img src="/common/images/magento-logo-m.png"></a></div>
	   <p class="brand">Contents</p>
 	   <div tocfrom="h1, h2, h3" toctemplate="default:nonum:collapsible"/></div>
	   <div class="back"><p class="back"><a href="/guides/m2devgde/v1.0.0.0/index.html"><img class="prev" src="/common/images/prev-arrow.png">Back to the Magento 2 Developer's Guide</a></p></div>

		</div>


     <div class="container">


<h1 id="authorizing-web-api-requests">Authorizing Web API Requests</h1>

<p><a href="https://github.com/magento/devdocs/blob/master/guides/m2devgde/v1.0.0.0/webapi/webapi-basic-auth.md" target="_blank"><em>Help us improve this page</em></a>&nbsp;<img src="/common/images/newWindow.gif" /></p>

<p><strong>Note</strong>: The <code>AuthorizationV1Interface</code> interface discussed in this topic is not implemented yet.</p>

<p>This topic provides basic information about how to authorize Web API requests.</p>

<p>When a merchant installs an integration, they must be informed which Magento resources the Magento integration needs access to. To see how a merchant authorizes an integration, go to <a href="/guides/m2devgde/v1.0.0.0/integration/integration-auth.html">service data objects</a>).</p>

<p>Service developers declare the list of permissions required in the integrationâ€™s <code>webapi.xml</code>. This is discussed in more detail in <a href="/guides/m2devgde/v1.0.0.0/webapi/what-is-webapi.html">service data objects</a>).</p>

<p><strong>Note</strong>: The Web API framework only verifies that the user (Magento administrator, anonymous user, API user, and so on) is authorized to invoke the API. Any business logic specific authorizations must be implemented at the service level.</p>

<p>The following table shows what we expect <a href="https://github.com/magento/magento2/blob/master/app/code/Magento/Authz/Service/AuthorizationV1Interface.php" target="_blank">AuthorizationV1Interface</a> methods to perform. <em>(<code>AuthorizationV1Interface</code> is not implemented yet.)</em> </p>

<table>
	<tbody>
		<tr class="table-headings">
			<th>Method</th>
			<th>Expected function</th>
		</tr>
	<tr class="even">
		<td>grantPermissions()</td>
		<td>Stores custom permissions.</td>
	</tr>
	<tr class="odd">
		<td>grantAllPermissions()</td>
		<td>Stores permissions to all available resources.</td>
	</tr>
	<tr class="even">
		<td>getAllowedResources()</td>
		<td>Gets the names of permissions for rendering in the Magento Admin.</td>
	</tr>
	<tr class="odd">
		<td>removePermissions()</td>
		<td>Removes all ACL-related entities on integration removal.</td>
	</tr>
</tbody>
</table>

<h2 id="authorization-checking-in-rest-calls">Authorization Checking in REST Calls</h2>

<p>REST resources are speicifed in <code>webapi.xml</code> by <code>route</code> objects. A snippet follows:</p>

<script src="https://gist.github.com/xcomSteveJohnson/13436bc6c977f82e2a8f.js"></script>

<p>When a client requests access to the <code>/V1/testmodule1</code> route, the resources it requires must be checked: <code>Magento_TestModule1::resource1</code> and <code>Magento_TestModule1::resource2</code>.</p>

<p>The authorization checks are performed by the <code>dispatch</code> method in <a href="https://github.com/magento/magento2/blob/master/app/code/Magento/Webapi/Controller/Rest.php" target="_blank">\Magento\Webapi\Controller\Rest</a>.</p>

<p>For the call to succeed, <em>all</em> resources must be authorized; otherwise, an authorization exception is thrown.</p>

<h4 id="related-topics">Related Topics:</h4>

<ul>
  <li>
    <p><a href="/guides/m2devgde/v1.0.0.0/svcs-framework/build-svc.html">Basics of Building a Service</a></p>
  </li>
  <li>
    <p><a href="/guides/m2devgde/v1.0.0.0/webapi/what-is-webapi.html">What Is the Web API Framework?</a></p>
  </li>
</ul>

    <footer>
       <p class="text-muted credit">&copy; 2014 MAGENTO, INC. ALL RIGHTS RESERVED.<br />
	   For more information, contact <a href="mailto:DL-Magento-Doc-Feedback@ebay.com">the Magento 2 documentation team</a>.</p>
	   
    </footer>
 <!-- Bootstrap core JavaScript-->
    <script src="/common/js/jquery-1.10.2.min.js"></script>
    <script src="/common/js/bootstrap.min.js"></script>
    <script src="/common/js/bootstrap.js"></script>
    <script type="text/javascript" src="/common/js/hc.js"></script>
</body>

</html>

